
<style>
    *{
        box-sizing: border-box;
    }

    body{
        font-family: sans-serif;
    }

    .scene {
        max-width: 300px;
        max-height: 300px;
        width: 100%;
        height: 100%;
        margin: 80px;
        perspective: 800px;
        border:1px solid black
    }

    .cube {
        width: 300px;
        height: 300px;
        position: relative;
        transform-style: preserve-3d;
    }

    .cube__face {
        position: absolute;
        width: 300px;
        height: 300px;

        font-size: 40px;
        font-weight: bold;
        color: white;
        text-align: center;
    
        -webkit-user-select: none;  
        -moz-user-select: none;    
        -ms-user-select: none;      
        user-select: none;

        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
    }

    .cube__face--front {
        background-image: url("1.png");
            
    }

    .cube__face--right {
        background-image: url("Different-300x300-pixels-depth-images-of-the-same-person-Invalid-no-data-pixels-have.png");
    }

    .cube__face--back {
        background-image: url("download.png");
    }

    .cube__face--left {
        background-image: url("no-image250.png");
    }

    .cube__face--front {
        transform: rotateY(0deg) translateZ(150px);
    }

    .cube__face--right {
        transform: rotateY(90deg) translateZ(150px);
    }

    .cube__face--back {
        transform: rotateY(180deg) translateZ(150px);
    }

    .cube__face--left {
        transform: rotateY(-90deg) translateZ(150px);
    }

</style>

    <div class="scene">
        <div class="cube" style="transform: translateZ(-150px) rotateY(0deg)">
            <a href="#" class="cube__face cube__face--front"></a>
            <a href="#" class="cube__face cube__face--back"></a>
            <a href="#" class="cube__face cube__face--right"></a>
            <a href="#" class="cube__face cube__face--left"></a>   
        </div>
        <div
                style="display: block;
                margin: 0px;
                padding: 0px;
                border-radius: 0px;
                border: 0px;
                max-width: none;
                max-height: none;
                min-width: 0px;
                min-height: 0px;
                background-image: none;
                background-color: transparent;
                overflow: visible;
                width: 96%;
                height: 1px;
                position: absolute;
                top: 50%;
                left: 6px;">
                <a
                    style="display: block; margin: 0px; padding: 0px; border-radius: 0px; border: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; background-image: none; background-color: transparent; overflow: visible; width: 34px; height: 34px; position: absolute; top: -17px; right: 0px; opacity: 0.4; cursor: pointer;">
                    <img onclick="goLeft()"
                        src="left-btn.png"
                        style="display: block; margin: 0px; padding: 0px; border-radius: 0px; border: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; background-image: none; background-color: transparent; overflow: visible; width: 34px; height: 34px; position: relative; transform: scaleX(-1);">
                    </a>
                    <a
                    style="z-index:9999;display: block; margin: 0px; padding: 0px; border-radius: 0px; border: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; background-image: none; background-color: transparent; overflow: visible; width: 34px; height: 34px; position: absolute; top: -17px; left: 0px; opacity: 0.4; cursor: pointer;">
                    <img onclick="goRight()"
                        src="left-btn.png"
                        style="z-index:9999;display: block; margin: 0px; padding: 0px; border-radius: 0px; border: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; background-image: none; background-color: transparent; overflow: visible; width: 34px; height: 34px; position: relative;">
                    </a>
            </div>
    </div>

    
<script>
    var cube = document.querySelector('.cube');
    let deg = 0; //stupne otoceni kostky
    let animate1 = null;
    let animate2 = null;

    function goRight(){ //otočí kostku o 90deg doprava
        deg += 90;
        cube.style.transition = "transform 0.15s";
        let translate = 150;
        clearInterval(animate1);
        animate1 = setInterval(animate11, 1);
        function animate11(){
            translate+=15;
            cube.style.transform = "translateZ(-"+translate+"px) rotateY("+(deg)+"deg)";            
            if(translate >= 480){
                clearInterval(animate1);
                let animate2 = setInterval(()=>{
                    translate-=10;
                    cube.style.transform = "translateZ(-"+translate+"px) rotateY("+(deg)+"deg)";
                    if(translate <= 150){
                        clearInterval(animate2);
                    }
                }, 1)
            }
        }
        console.log(deg);
      
    }

    function goLeft(){ //otočí kostku o 90deg doprava
        deg -= 90;
        cube.style.transition = "transform 0.15s";
        let translate = 150;
        clearInterval(animate1);
        animate1 = setInterval(animate11, 1);
        function animate11(){
            translate+=15;
            cube.style.transform = "translateZ(-"+translate+"px) rotateY("+(deg)+"deg)";            
            if(translate >= 480){
                clearInterval(animate1);
                let animate2 = setInterval(()=>{
                    translate-=10;
                    cube.style.transform = "translateZ(-"+translate+"px) rotateY("+(deg)+"deg)";
                    if(translate <= 150){
                        clearInterval(animate2);
                    }
                }, 1)
            }
        }
        console.log(deg);
    }
/*
    var offset = 0, startX, startX2;
    var translate_offset = 0;
    
    cube.ondragstart = function(e) {
        var x = e.pageX;      
        startX = e.pageX - offset;  
        startX2 = e.pageX - translate_offset;  
    }

    cube.onmouseup = function(){
        startX2 = null;
        startX = null;
    }

    cube.ondragleave = function(){
        //offset = 0;
        translate_offset = 0;
        deg += offset;
    }

    let prevX = -1;
    cube.ondragover = function(e){
        if(startX){
            offset = e.pageX - startX;
            translate_offset = e.pageX - startX2;
            //offset = e.pageX - startX;
            cube.style.transition = "transform 0s";

            if(prevX == -1){
                prevX = e.pageX;
                return false;
            }
            if(prevX > e.pageX) { //pohyb doleva
                cube.style.transform = "translateZ(-"+150+"px) rotateY("+offset+"deg)"; 
                
            }
            else if(prevX < e.pageX) { //pohyb doprava
                cube.style.transform = "translateZ(-"+150+"px) rotateY("+offset+"deg)"; 
            }
            
            console.log(deg, offset, translate_offset)

            prevX = e.pageX;
        }
    }
*/
    var offset = 0, startX; 

/*
    v offsetu jsou stupne o kolik uzivatel otocil kostku
*/
    
    cube.onmousedown = function(evt) {
        var x = evt.pageX;      
        startX = evt.pageX - offset;
        console.log(startX);
        
    }
    cube.onmouseup = function(){
        startX = null;
    }
    cube.ondragend = function(){
        

    }
    cube.ondragover = function(evt){
        if(startX){
            offset = evt.pageX - startX;
            console.log(offset);
            cube.style.transition = "transform 0s";
            cube.style.transform = "translateZ(-"+150+"px) rotateY("+offset+"deg)"; 
            /* 
            tady je treba dynamicky menit translateZ když je kostka otocena v půlce tak translateZ by melo byt 400px
            */ 
        }
    }

</script>